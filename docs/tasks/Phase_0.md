# フェーズ0 タスク一覧（バードアイ図と全体整理）

対象: `docs/Plan.md` の「フェーズ0: バードアイ図と全体整理」

## Task 1: 画面遷移図（未ログイン→ログイン→入力→ダッシュボード）の作成
- 目的: MVPの主要画面遷移を一目で把握できるようにする。
- 作業内容:
  - 画面ノード（未ログイン、ログイン、入力、ダッシュボード）と遷移矢印を整理する。
  - Mermaid で画面遷移図を作成し `docs/Diagrams.md` に出力する。
- 受入基準（Gherkin）:
  - シナリオ: 画面遷移がMVPの必須フローを網羅している
    - 前提: `docs/Plan.md` に定義された「未ログイン→ログイン→入力→ダッシュボード」の遷移要件がある
    - もし: `docs/Diagrams.md` を確認する
    - ならば: Mermaid 図に未ログイン・ログイン・入力・ダッシュボードの4画面が含まれている
    - かつ: 画面間の遷移が矢印で表現されている

## Task 2: データフロー図（入力→計算エンジン→可視化）の作成
- 目的: 入力値がどのように計算・可視化に流れるかを俯瞰できるようにする。
- 作業内容:
  - 入力（フォーム/DB）→ 計算エンジン → 可視化（グラフ/表/サマリ）の流れを整理する。
  - Mermaid でデータフロー図を作成し `docs/Diagrams.md` に追記する。
- 受入基準（Gherkin）:
  - シナリオ: データフローが入力から表示まで一貫している
    - 前提: `docs/Plan.md` に「入力→計算エンジン→可視化」の要件がある
    - もし: `docs/Diagrams.md` を確認する
    - ならば: Mermaid 図に入力・計算エンジン・可視化の3要素が含まれている
    - かつ: 入力から可視化までの矢印が連続して表現されている

## Task 3: 主要エンティティと Supabase テーブル対応図の作成
- 目的: 主要エンティティとDBテーブルの対応関係を明確にする。
- 作業内容:
  - `docs/Diagrams.md` のデータモデルにある主要エンティティ（income/expenses/life_events/mortgages 等）を整理する。
  - Mermaid で「エンティティ ⇔ Supabase テーブル」の対応図を作成し `docs/Diagrams.md` に追記する。
- 受入基準（Gherkin）:
  - シナリオ: 主要エンティティとテーブルの対応が可視化されている
    - 前提: `docs/Diagrams.md` に主要エンティティとテーブルが記載されている
    - もし: `docs/Diagrams.md` を確認する
    - ならば: Mermaid 図に income、expenses、life_events、mortgages が含まれている
    - かつ: 各エンティティが対応する Supabase テーブルに接続されている

## Task 4: Mermaid 図だけで全体像が理解できるかのレビュー
- 目的: フェーズ0のDOD「Mermaid図だけで把握できる」を満たす。
- 作業内容:
  - 作成済の3つのMermaid図（画面遷移・データフロー・エンティティ対応）を俯瞰し、説明不足がないか確認する。
  - 必要に応じて `docs/Diagrams.md` の図を微調整する。
- 受入基準（Gherkin）:
  - シナリオ: Mermaid図のみで入力から表示までの流れが理解できる
    - 前提: `docs/Diagrams.md` に3つの Mermaid 図が追加されている
    - もし: Mermaid 図だけを読み、本文を読まずに全体像を説明しようとする
    - ならば: 画面遷移とデータフローと主要エンティティの関係を一貫して説明できる
